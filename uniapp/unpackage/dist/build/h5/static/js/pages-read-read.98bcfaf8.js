(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-read-read"],{"079b":function(t,e,i){var n=i("24fb"),a=i("1de5"),o=i("e3d1");e=n(!1);var r=a(o);e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/*每个页面公共css */@font-face{font-family:iconfont;\r\n  /* project id 1997429 */src:url(https://at.alicdn.com/t/font_1997429_8xzvctxta3u.eot);src:url(https://at.alicdn.com/t/font_1997429_8xzvctxta3u.eot#iefix) format("embedded-opentype"),url(https://at.alicdn.com/t/font_1997429_8xzvctxta3u.woff2) format("woff2"),url(https://at.alicdn.com/t/font_1997429_8xzvctxta3u.woff) format("woff"),url(https://at.alicdn.com/t/font_1997429_8xzvctxta3u.ttf) format("truetype"),url(https://at.alicdn.com/t/font_1997429_8xzvctxta3u.svg#iconfont) format("svg")}.iconfont[data-v-589eb0d4]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}*[data-v-589eb0d4],\r\nuni-view[data-v-589eb0d4]{box-sizing:border-box}uni-page-body[data-v-589eb0d4]{position:relative;width:100%;height:100%}.hidden[data-v-589eb0d4]{opacity:0}.action[data-v-589eb0d4]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center}.action .item[data-v-589eb0d4]{flex:1;height:100%}.container[data-v-589eb0d4]{position:fixed;top:0;left:0;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center;padding:0 20px;height:100%;width:100%;background-color:#fff;overflow:hidden}.container .chapter[data-v-589eb0d4]{font-size:12px;color:#746e65;height:30px;width:100%;line-height:30px}.container .bottom-bar[data-v-589eb0d4]{display:flex;justify-content:space-between;align-items:center;font-size:12px;color:#746e65;height:30px;width:100%}.container .content[data-v-589eb0d4]{flex:1 1 auto;overflow:hidden}.container .content .inner-box[data-v-589eb0d4]{overflow:hidden}.container .content .inner-box .book-inner[data-v-589eb0d4]{text-indent:2em;text-align:justify}.container0[data-v-589eb0d4]{background:url('+r+");background-color:#fff;background-size:100% 100%}.container1[data-v-589eb0d4]{background-color:#000}.menu[data-v-589eb0d4]{position:fixed;top:0;left:0;z-index:300}.menu .menu-top[data-v-589eb0d4]{position:absolute;left:0;width:100%;background-color:#333;transition:top .3s}.menu .menu-top .head[data-v-589eb0d4]{position:relative;display:flex;justify-content:center;align-items:center;height:40px;width:100%;line-height:40px;color:#fff}.menu .menu-top .back[data-v-589eb0d4]{position:absolute;top:0;left:10px}.menu .directory[data-v-589eb0d4]{position:absolute;top:0;display:flex;flex-flow:column;width:%?600?%;height:100%;transition:left .1s}.menu .directory .bookname[data-v-589eb0d4]{padding:20px 0 20px 10px;height:60px;font-size:18px}.menu .directory .directory-listItem[data-v-589eb0d4]{display:flex;align-items:center;padding-left:10px;height:40px;font-size:14px;border-bottom:#eee solid 1px}.menu .directory .active[data-v-589eb0d4]{color:red}.menu .menu-bottom[data-v-589eb0d4]{position:absolute;left:0;width:100%;background-color:#333;transition:bottom .3s;color:#fff}.menu .menu-bottom .show-chapter[data-v-589eb0d4]{position:absolute;left:50%;top:0;-webkit-transform:translate(-50%,-110%);transform:translate(-50%,-110%);padding:5px 10px;line-height:20px;border-radius:%?10?%;font-size:13px;background-color:#333}.menu .menu-bottom .progress-box[data-v-589eb0d4]{display:flex;justify-content:space-between;align-items:center;padding:0 20px;height:50px;width:100%;font-size:15px}.menu .menu-bottom .items-box[data-v-589eb0d4]{display:flex;justify-content:space-around;align-items:center;height:80px;width:100%}.menu .menu-bottom .items-box .item-box[data-v-589eb0d4]{display:flex;flex-flow:column;justify-content:center;align-items:center;height:100%}.menu .setting[data-v-589eb0d4]{position:absolute;left:0;display:flex;flex-direction:column;justify-content:space-around;padding:10px 20px;width:100%;color:#fff;background-color:#333;transition:bottom .3s}.menu .setting .item[data-v-589eb0d4]{display:flex;align-items:center;height:70px}.menu .setting .item .item-name[data-v-589eb0d4]{padding:10px;color:#fff;font-size:14px}.menu .setting .item .icon[data-v-589eb0d4]{margin-right:10px;padding:5px 20px;font-size:15px;height:32px;line-height:20px;width:auto;text-align:center;border-radius:20px;border:#fff solid 1px}.menu .setting .item .type-setting[data-v-589eb0d4]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;margin-right:10px;padding:5px;height:30px;width:30px;border-radius:5px;border:#fff solid 1px}.menu .setting .item .type-setting .line[data-v-589eb0d4]{width:100%;border-bottom:#fff solid 1px}.menu .setting .item .type-setting .lineActive[data-v-589eb0d4]{width:100%;border-bottom:#f90 solid 1px}.menu .setting .item .active[data-v-589eb0d4]{color:#f90;border:#f90 solid 1px}.cover uni-image[data-v-589eb0d4]{height:%?400?%;width:%?300?%;background-color:#eee}",""]),t.exports=e},1628:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.getItem=function(t){},e.removeItem=function(t){},e.setFullscreen=function(t){return!1},e.setItem=function(t,e){}},"75f0":function(t,e,i){"use strict";i.r(e);var n=i("929f"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"76f8":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{height:"100%"}},[t.curPage.text?t._e():i("v-uni-view",{staticStyle:{"z-index":"999",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",display:"flex","justify-content":"center","align-items":"center"}},[t._v(t._s(t.showtips))]),i("v-uni-view",{staticClass:"container hidden"},[i("v-uni-view",{staticClass:"chapter"},[t._v("章节名")]),i("v-uni-view",{staticClass:"content",attrs:{id:"content"}},[i("v-uni-view",{staticClass:"inner-box",style:{height:t.innerHeight+"px"}},[i("v-uni-view",{staticClass:"book-inner",style:{fontSize:t.fontSize+"px",lineHeight:t.lineHeight*t.fontSize+"px"},attrs:{id:"preChapter"},domProps:{innerHTML:t._s(t.preChapter.text)}})],1)],1),i("v-uni-view",{staticClass:"bottom-bar"},[t._v("显示电量、页码")])],1),i("v-uni-view",{staticClass:"container hidden"},[i("v-uni-view",{staticClass:"chapter"},[t._v("章节名")]),i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"inner-box",style:{height:t.innerHeight+"px"}},[i("v-uni-view",{staticClass:"book-inner",style:{fontSize:t.fontSize+"px",lineHeight:t.lineHeight*t.fontSize+"px"},attrs:{id:"curChapter"},domProps:{innerHTML:t._s(t.curChapter.text)}})],1)],1),i("v-uni-view",{staticClass:"bottom-bar"},[t._v("显示电量、页码")])],1),i("v-uni-view",{staticClass:"container hidden"},[i("v-uni-view",{staticClass:"chapter"},[t._v("章节名")]),i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"inner-box",style:{height:t.innerHeight+"px"}},[i("v-uni-view",{staticClass:"book-inner",style:{fontSize:t.fontSize+"px",lineHeight:t.lineHeight*t.fontSize+"px"},attrs:{id:"nextChapter"},domProps:{innerHTML:t._s(t.nextChapter.text)}})],1)],1),i("v-uni-view",{staticClass:"bottom-bar"},[t._v("显示电量、页码")])],1),i("v-uni-view",{staticClass:"cover container",class:{container0:1===t.background,container1:2===t.background},style:{zIndex:201,transform:"translate"+t.cover.pageTranslate[t.turnType],transition:"transform "+(t.showAnimation?t.turnPageTime:0)+"s",boxShadow:t.showShadow&&0===t.turnType?"0 0 10px 0 rgba(0,0,0,.4)":""},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.coverTouchStart.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.coverTouchEnd.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.coverTouchMove.apply(void 0,arguments)},touchcancel:function(e){arguments[0]=e=t.$handleEvent(e),t.coverTouchcancel.apply(void 0,arguments)}}},[i("v-uni-image"),i("v-uni-view",[t._v(t._s(t.bookName))])],1),i("v-uni-view",{staticClass:"container",class:{container0:1===t.background,container1:2===t.background},style:{zIndex:102,transform:"translate"+t.prePage.pageTranslate[t.turnType],transition:"transform "+(t.showAnimation?t.turnPageTime:0)+"s",boxShadow:t.showShadow&&0===t.turnType?"0 0 10px 0 rgba(0,0,0,.4)":""}},[i("v-uni-view",{staticClass:"chapter"},[t._v(t._s(t.prePage.chapterName))]),i("v-uni-view",{staticClass:"content"},[t.prePage.canRead?i("v-uni-view",{staticClass:"inner-box",style:{height:t.innerHeight+"px"}},[i("v-uni-view",{staticClass:"book-inner",style:{fontSize:t.fontSize+"px",lineHeight:t.lineHeight*t.fontSize+"px",color:""+t.colorList[t.background-1],transform:"translateY(-"+t.prePage.pageNum*t.innerHeight+"px)"},domProps:{innerHTML:t._s(t.prePage.text)}})],1):i("v-uni-view",{staticStyle:{display:"flex","flex-flow":"column","justify-content":"center","align-items":"center",height:"100%"}},[t._v("暂时不可阅读")])],1),i("v-uni-view",{staticClass:"bottom-bar"},[i("v-uni-view",[t._v(t._s(t.systemTimeStr))]),i("v-uni-view",[t._v(t._s(t.prePage.pageNum+1)+"/"+t._s(t.prePage.totalPage))]),i("v-uni-view",[i("battery",{attrs:{level:t.batteryLevel,charging:2===t.batteryState}})],1)],1)],1),i("v-uni-view",{staticClass:"container",class:{container0:1===t.background,container1:2===t.background},style:{zIndex:101,transform:"translate"+t.curPage.pageTranslate[t.turnType],transition:"transform "+(t.showAnimation?t.turnPageTime:0)+"s",boxShadow:t.showShadow&&0===t.turnType?"0 0 10px 0 rgba(0,0,0,.4)":""},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchEnd.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchMove.apply(void 0,arguments)},touchcancel:function(e){arguments[0]=e=t.$handleEvent(e),t.touchcancel.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"chapter"},[t._v(t._s(t.curPage.chapterName))]),i("v-uni-view",{staticClass:"content"},[t.curPage.canRead?i("v-uni-view",{staticClass:"inner-box",style:{height:t.innerHeight+"px"}},[i("v-uni-view",{staticClass:"book-inner",style:{fontSize:t.fontSize+"px",lineHeight:t.lineHeight*t.fontSize+"px",color:""+t.colorList[t.background-1],transform:"translateY(-"+t.curPage.pageNum*t.innerHeight+"px)"},domProps:{innerHTML:t._s(t.curPage.text)}})],1):i("v-uni-view",{staticStyle:{display:"flex","flex-flow":"column","justify-content":"center","align-items":"center",height:"100%"}},[t._v("暂时不可阅读")])],1),i("v-uni-view",{staticClass:"bottom-bar"},[i("v-uni-view",[t._v(t._s(t.systemTimeStr))]),i("v-uni-view",[t._v(t._s(t.curPage.pageNum+1)+"/"+t._s(t.curPage.totalPage))]),i("v-uni-view",[i("battery",{attrs:{level:t.batteryLevel,charging:2===t.batteryState}})],1)],1)],1),i("v-uni-view",{staticClass:"container",class:{container0:1===t.background,container1:2===t.background},style:{zIndex:100,transform:"translate"+t.nextPage.pageTranslate[t.turnType],transition:"transform "+(t.showAnimation?t.turnPageTime:0)+"s",boxShadow:t.showShadow&&0===t.turnType?"0 0 10px 0 rgba(0,0,0,.4)":""}},[i("v-uni-view",{staticClass:"chapter"},[t._v(t._s(t.nextPage.chapterName))]),i("v-uni-view",{staticClass:"content"},[t.nextPage.canRead?i("v-uni-view",{staticClass:"inner-box",style:{height:t.innerHeight+"px"}},[i("v-uni-view",{staticClass:"book-inner",style:{fontSize:t.fontSize+"px",lineHeight:t.lineHeight*t.fontSize+"px",color:""+t.colorList[t.background-1],transform:"translateY(-"+t.nextPage.pageNum*t.innerHeight+"px)"},domProps:{innerHTML:t._s(t.nextPage.text)}})],1):i("v-uni-view",{staticStyle:{display:"flex","flex-flow":"column","justify-content":"center","align-items":"center",height:"100%"}},[t._v("暂时不可阅读")])],1),i("v-uni-view",{staticClass:"bottom-bar"},[i("v-uni-view",[t._v(t._s(t.systemTimeStr))]),i("v-uni-view",[t._v(t._s(t.nextPage.pageNum+1)+"/"+t._s(t.nextPage.totalPage))]),i("v-uni-view",[i("battery",{attrs:{level:t.batteryLevel,charging:2===t.batteryState}})],1)],1)],1),t.menuShow?i("v-uni-view",{staticClass:"menu",style:{height:"100%",width:t.windowWidth+"px"},on:{touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.closeMenu.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"menu-top",style:{height:t.statusBarHeight+40+"px",top:t.itemShow?0:"-100%"},on:{touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{style:{height:t.statusBarHeight+"px"}}),i("v-uni-view",{staticClass:"head"},[i("v-uni-text",{staticClass:"iconfont back",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[t._v("")]),i("v-uni-view",{staticClass:"title"},[t._v(t._s(t.bookName))])],1)],1),i("v-uni-view",{staticClass:"menu-bottom",style:{bottom:t.itemShow?0:"-100%"},on:{touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[t.progressTouched?i("v-uni-view",{staticClass:"show-chapter"},[t._v(t._s(t.directoryList[t.chapterProgress].name))]):i("v-uni-view",{staticClass:"show-chapter"},[t._v(t._s(t.curChapter.chapterName))]),i("v-uni-view",{staticClass:"progress-box"},[i("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goPreChapter.apply(void 0,arguments)}}},[t._v("上一章")]),i("v-uni-view",{staticStyle:{flex:"1",height:"100%",padding:"8px 0"}},[i("v-uni-slider",{attrs:{value:t.curChapter.chapterIndex,activeColor:"#000","block-size":20,max:t.directoryList.length-1},on:{changing:function(e){arguments[0]=e=t.$handleEvent(e),t.slideChanging.apply(void 0,arguments)},change:function(e){arguments[0]=e=t.$handleEvent(e),t.slideChange.apply(void 0,arguments)}}})],1),i("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goNextChapter.apply(void 0,arguments)}}},[t._v("下一章")])],1),i("v-uni-view",{staticClass:"items-box"},[i("v-uni-view",{staticClass:"item-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDirectory.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont",staticStyle:{"font-size":"25px"}},[t._v("")]),i("v-uni-text",{staticStyle:{"font-size":"13px"}},[t._v("目录")])],1),2===t.background?i("v-uni-view",{staticClass:"item-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeBackground(1)}}},[i("v-uni-text",{staticClass:"iconfont",staticStyle:{"font-size":"25px"}},[t._v("")]),i("v-uni-text",{staticStyle:{"font-size":"13px"}},[t._v("夜间")])],1):t._e(),1===t.background?i("v-uni-view",{staticClass:"item-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeBackground(2)}}},[i("v-uni-text",{staticClass:"iconfont",staticStyle:{"font-size":"25px"}},[t._v("")]),i("v-uni-text",{staticStyle:{"font-size":"13px"}},[t._v("日间")])],1):t._e(),i("v-uni-view",{staticClass:"item-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openSetting.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont",staticStyle:{"font-size":"25px"}},[t._v("")]),i("v-uni-text",{staticStyle:{"font-size":"13px"}},[t._v("设置")])],1)],1)],1),i("v-uni-view",{staticClass:"setting",style:{bottom:t.settingShow?0:"-100%"},on:{touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"item-name"},[t._v("字号")]),t.fontSize<t.maxFontSize?i("v-uni-view",{staticClass:"icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bigSize.apply(void 0,arguments)}}},[t._v("A+")]):i("v-uni-view",{staticClass:"icon",staticStyle:{color:"#666",border:"#666 solid 1px"}},[t._v("A+")]),t.fontSize>t.minFontSize?i("v-uni-view",{staticClass:"icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.smallSize.apply(void 0,arguments)}}},[t._v("A-")]):i("v-uni-view",{staticClass:"icon",staticStyle:{color:"#666",border:"#666 solid 1px"}},[t._v("A-")]),1===t.simplified?i("v-uni-view",{staticClass:"icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeFont(2)}}},[t._v("繁體")]):i("v-uni-view",{staticClass:"icon",staticStyle:{border:"#FF9900 solid 1px",color:"#FF9900"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeFont(1)}}},[t._v("繁體")])],1),i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"item-name"},[t._v("排版")]),i("v-uni-view",{staticClass:"type-setting",class:{active:1===t.lineHeight},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeLineHeight(1)}}},t._l(5,(function(e){return i("v-uni-view",{key:e,staticClass:"line",class:{lineActive:1===t.lineHeight}})})),1),i("v-uni-view",{staticClass:"type-setting",class:{active:1.5===t.lineHeight},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeLineHeight(1.5)}}},t._l(4,(function(e){return i("v-uni-view",{key:e,staticClass:"line",class:{lineActive:1.5===t.lineHeight}})})),1),i("v-uni-view",{staticClass:"type-setting",class:{active:2===t.lineHeight},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeLineHeight(2)}}},t._l(3,(function(e){return i("v-uni-view",{key:e,staticClass:"line",class:{lineActive:2===t.lineHeight}})})),1)],1),i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"item-name"},[t._v("翻页")]),i("v-uni-view",{staticClass:"icon",class:{active:0===t.turnType},staticStyle:{padding:"5px 8px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTurnType(0)}}},[t._v("覆盖")]),i("v-uni-view",{staticClass:"icon",class:{active:1===t.turnType},staticStyle:{padding:"5px 8px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTurnType(1)}}},[t._v("左右平移")]),i("v-uni-view",{staticClass:"icon",class:{active:2===t.turnType},staticStyle:{padding:"5px 8px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTurnType(2)}}},[t._v("上下平移")])],1),i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"item-name"},[t._v("背景")]),i("v-uni-view",{staticClass:"icon",class:{active:1===t.background},staticStyle:{background:"url(@/static/background1.jpg)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeBackground(1)}}}),i("v-uni-view",{staticClass:"icon",class:{active:2===t.background},staticStyle:{"background-color":"#000"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeBackground(2)}}})],1)],1),t.directoryShowBefore?i("v-uni-view",{staticClass:"directory",class:{container0:1===t.background,container1:2===t.background},style:{left:t.directoryShow?0:"-100%",color:""+t.colorList[t.background-1],boxShadow:"0 0 10px 0 rgba(0,0,0,.4)"},on:{touchend:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"bookname"},[t._v(t._s(t.bookName))]),i("virtual-list",{attrs:{items:t.directoryList,size:40,remain:16,active:t.curChapter.chapterIndex,scrollHeight:t.windowHeight-60},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item,a=e.active;return[i("v-uni-view",{staticClass:"directory-listItem",class:{active:n.index==a},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToChapter(n.index)}}},[t._v(t._s(n.name))])]}}],null,!1,325545104)})],1):t._e()],1):t._e()],1)},a=[]},"77bf":function(t,e,i){"use strict";i.r(e);var n=i("76f8"),a=i("75f0");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("c3ca");var r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"589eb0d4",null,!1,n["a"],void 0);e["default"]=s.exports},"929f":function(t,e,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d3b7"),i("159b"),i("14d9"),i("e25e"),i("ac1f"),i("99af");var a=n(i("c7eb")),o=n(i("1da1")),r=n(i("53ca")),s=(i("26cb"),n(i("d13b"))),c=n(i("7c2c")),h=i("cf85"),p=i("1628"),d={components:{battery:s.default,virtualList:c.default},data:function(){return{showtips:"正在加载阅读器...",bookInfo:{},bookName:"",bookId:"",index:0,history:{chapterIndex:0,progress:0},text:"",directoryList:[],currentPage:0,innerHeight:0,preChapter:{ready:!1,chapterIndex:"",chapterName:"",text:"",totalPage:"",canRead:!0},curChapter:{chapterIndex:"",chapterName:"",text:"",totalPage:"",canRead:!0},nextChapter:{ready:!1,chapterIndex:"",chapterName:"",text:"",totalPage:"",canRead:!0},tmpChapter:{text:"",canRead:!0},cover:{pageTranslate:["","",""]},prePage:{ready:!1,chapterName:"",text:"",pageNum:"",totalPage:1,pageTranslate:["","",""],canRead:!0},curPage:{ready:!1,chapterName:"",text:"",pageNum:1,totalPage:1,pageTranslate:["","",""],canRead:!0},nextPage:{ready:!1,chapterName:"",text:"",pageNum:"",totalPage:"",pageTranslate:["","",""],canRead:!0},next:!1,pre:!1,waitForNext:!1,waitForPre:!1,waitForNextChapter:!1,waitForPreChapter:!1,showAnimation:!1,showShadow:!1,windowWidth:0,windowHeight:0,contentHeight:0,platform:"",batteryState:"",batteryLevel:100,systemTime:"",systemTimeStr:"",statusBarHeight:0,pixelRatio:"",touchStartX:0,touchX:0,delta:0,touchStartY:0,touchY:0,menuShow:!1,itemShow:!1,settingShow:!1,directoryShow:!1,directoryShowBefore:!1,turnPageTime:.5,maxFontSize:30,minFontSize:14,turnType:0,fontSize:"",simplified:"",lineHeight:"",background:"",colorList:["#000","#666"],chapterProgress:0,progressTouched:!1,showmask:!0}},onLoad:function(t){this.bookId=t.id,this.bookInfo=uni.getStorageSync("bookstore-"+t.id),this.bookName=this.bookInfo.name,this.getSystemInfo(),this.initPage(),this.updateviews()},onUnload:function(){(0,p.setFullscreen)(!1),this.setStorage()},onHide:function(){this.setStorage()},mounted:function(){},computed:{progress:function(){return 1===this.curChapter.totalPage?0:this.currentPage/(this.curChapter.totalPage-1)}},methods:{updateviews:function(){this.$u.api.updateViews({book_id:this.bookId}).then((function(t){})).catch((function(t){}))},setStorage:function(){var t=this,e=uni.getStorageSync("history");"object"!==(0,r.default)(e)&&(e=[]);var i=!1;e.forEach((function(e){e.bookId===t.bookId&&(i=!0,e.chapterIndex=t.curChapter.chapterIndex,e.progress=t.progress)})),i||e.push({bookId:this.bookId,chapterIndex:this.curChapter.chapterIndex,progress:this.progress}),uni.setStorageSync("history",e),this.$set(this.bookInfo,"lastzj",this.curChapter.chapterName),this.$set(this.bookInfo,"progress",(100*(this.curChapter.chapterIndex+1)/this.directoryList.length).toFixed(2)),this.$set(this.bookInfo,"lasttime",parseInt((new Date).getTime()/1e3)),uni.setStorageSync("bookstore-"+this.bookId,this.bookInfo)},back:function(){uni.navigateBack()},getSystemInfo:function(){var t=this,e=uni.getSystemInfoSync(),i=e.windowWidth,n=e.windowHeight,a=e.statusBarHeight,o=e.platform,s=e.pixelRatio;this.statusBarHeight=a,this.windowWidth=i,this.windowHeight=n,this.pixelRatio=s,this.platform=o;var c=new Date;this.systemTime=Date.parse(c),this.systemTimeStr=(0,h.dateToStr)(this.systemTime),setInterval((function(){t.systemTime+=6e4,t.systemTimeStr=(0,h.dateToStr)(t.systemTime)}),6e4),this.fontSize=uni.getStorageSync("fontSize"),"number"!==typeof this.fontSize&&(this.fontSize=18),this.simplified=uni.getStorageSync("simplified"),"number"!==typeof this.simplified&&(this.simplified=1),this.lineHeight=uni.getStorageSync("lineHeight"),"number"!==typeof this.lineHeight&&(this.lineHeight=1.8),this.background=uni.getStorageSync("background"),"number"!==typeof this.background&&(this.background=1),this.turnType=uni.getStorageSync("turnType"),"number"!==typeof this.turnType&&(this.turnType=0);var p=uni.getStorageSync("history");"object"!==(0,r.default)(p)&&(p=[]),p.forEach((function(e){e.bookId===t.bookId&&(t.history=e)}))},initPage:function(){var t=this;return(0,o.default)((0,a.default)().mark((function e(){var i;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.cover.pageTranslate=["(".concat(-t.windowWidth,"px,0)"),"(".concat(-t.windowWidth,"px,0)"),"(0,".concat(-t.windowHeight,"px)")],console.log("开始 calcHeight"),e.next=4,t.calcHeight();case 4:return console.log("开始获取目录"),e.next=7,t.getDirectoryList();case 7:return console.log("目录处理完毕"),(t.history.chapterIndex>t.directoryList.length-1||!t.history.chapterIndex)&&(t.history.chapterIndex=0),console.log("history",t.history),e.next=12,t.getThreeChapter(t.history.chapterIndex);case 12:console.log("end getThreeChapter"),i=Math.floor((t.curChapter.totalPage-1)*t.history.progress),t.goToPage(i);case 15:case"end":return e.stop()}}),e)})))()},calcHeight:function(){var t=this;if(console.log("calcHeight----contentHeight",this.contentHeight),!this.contentHeight)return console.log("不存在，异步计算"),new Promise((function(e,i){t.$nextTick((function(){var i=uni.createSelectorQuery().in(t);i.select("#content").boundingClientRect((function(i){console.log("data",i),console.log("原始lineHeight="+t.lineHeight);var n=i.height;t.contentHeight=n;var a=t.fontSize*t.lineHeight;console.log("this.contentHeight="+n),console.log("lineHeight="+a),console.log("fontsiez="+t.fontSize);var o=Math.floor((n+Math.floor((a-t.fontSize)/2))/a);console.log("lineNum="+o),t.innerHeight=o*a,console.log("异步计算后innerHeight="+t.innerHeight),e()})).exec()}))}));var e=this.fontSize*this.lineHeight;console.log("存在this.contentHeight--lineHeight="+e);var i=Math.floor((this.contentHeight+Math.floor((e-this.fontSize)/2))/e);this.innerHeight=i*e,console.log("存在，inherHeight="+this.innerHeight)},calcCurChapter:function(){var t=this;return new Promise((function(e,i){setTimeout((function(){var i=uni.createSelectorQuery().in(t);i.select("#curChapter").boundingClientRect((function(i){console.log("获取curChapter",i);var n=i.height;t.curChapter.totalPage=Math.ceil(n/t.innerHeight)||1,t.curChapter.ready=!0,e()})).exec()}),100)}))},calcPreChapter:function(){var t=this;return new Promise((function(e,i){setTimeout((function(){var i=uni.createSelectorQuery().in(t);i.select("#preChapter").boundingClientRect((function(i){var n=i.height;t.preChapter.totalPage=Math.ceil(n/t.innerHeight)||1,t.preChapter.ready=!0,t.waitForPre&&(uni.hideLoading(),t.waitForPre=!1,t.goPrePage()),t.waitForPreChapter&&(uni.hideLoading(),t.waitForPreChapter=!1,t.goPreChapter()),e()})).exec()}),100)}))},calcNextChapter:function(){var t=this;return new Promise((function(e,i){setTimeout((function(){var i=uni.createSelectorQuery().in(t);i.select("#nextChapter").boundingClientRect((function(i){var n=i.height;t.nextChapter.totalPage=Math.ceil(n/t.innerHeight)||1,t.nextChapter.ready=!0,t.waitForNext&&(uni.hideLoading(),t.waitForNext=!1,t.goNextPage()),t.waitForNextChapter&&(uni.hideLoading(),t.waitForNextChapter=!1,t.goNextChapter()),e()})).exec()}),100)}))},coverTouchStart:function(t){this.showAnimation=!1,this.touchX=t.touches[0].clientX,this.touchStartX=t.touches[0].clientX,this.touchY=t.touches[0].clientY,this.touchStartY=t.touches[0].clientY},coverTouchMove:function(t){this.showShadow=!0;var e=0;0===this.turnType||1===this.turnType?(e=t.touches[0].clientX-this.touchStartX,e>this.windowWidth&&(e=this.windowWidth),e<-this.windowWidth&&(e=-this.windowWidth),this.delta=t.touches[0].clientX-this.touchX,this.touchX=t.touches[0].clientX):(e=t.touches[0].clientY-this.touchStartY,e>this.windowHeight&&(e=this.windowHeight),e<-this.windowHeight&&(e=-this.windowHeight),this.delta=t.touches[0].clientY-this.touchY,this.touchY=t.touches[0].clientY),this.next&&(e>0&&(e=0),this.cover.pageTranslate=["(".concat(e,"px,0)"),"(".concat(e,"px,0)"),"(0,".concat(e,"px)")],this.curPage.pageTranslate=["(0,0)","(".concat(this.windowWidth+e,"px,0)"),"(0,".concat(this.windowHeight+e,"px)")]),!this.pre&&!this.next&&e<0&&(this.next=!0,this.cover.pageTranslate=["(".concat(e,"px,0)"),"(".concat(e,"px,0)"),"(0,".concat(e,"px)")],this.curPage.pageTranslate=["(0,0)","(".concat(this.windowWidth+e,"px,0)"),"(0,".concat(this.windowHeight+e,"px,)")]),this.pre||!this.pre&&!this.next&&e>0&&(this.pre=!0,uni.showToast({title:"已经是第一页了",icon:"none"}))},coverTouchEnd:function(t){this.showAnimation=!0,this.showShadow=!1;var e=0;e=0===this.turnType||1===this.turnType?t.changedTouches[0].clientX-this.touchStartX:t.changedTouches[0].clientY-this.touchStartY,0===e?t.changedTouches[0].clientX<this.windowWidth/3?uni.showToast({title:"已经是第一页了",icon:"none"}):t.changedTouches[0].clientX>this.windowWidth/3*2?(this.cover.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")],this.curPage.pageTranslate=["(0,0)","(0,0)","(0,0)"]):t.changedTouches[0].clientX<=this.windowWidth/3*2&&t.changedTouches[0].clientX>=this.windowWidth/3&&this.showMenu():this.next&&this.delta<=0?(this.cover.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")],this.curPage.pageTranslate=["(0,0)","(0,0)","(0,0)"]):this.next&&this.delta>0&&(this.cover.pageTranslate=["(0,0)","(0,0)","(0,0)"],this.curPage.pageTranslate=["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")]),this.next=!1,this.pre=!1},coverTouchcancel:function(){this.showAnimation=!1,this.showShadow=!1,this.cover.pageTranslate=["(0,0)","(0,0)","(0,0)"],this.curPage.pageTranslate=["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")],this.next=!1,this.pre=!1},touchStart:function(t){this.showAnimation=!1,this.touchX=t.touches[0].clientX,this.touchStartX=t.touches[0].clientX,this.touchY=t.touches[0].clientY,this.touchStartY=t.touches[0].clientY},touchMove:function(t){this.showShadow=!0;var e=0;if(0===this.turnType||1===this.turnType?(e=t.touches[0].clientX-this.touchStartX,e>this.windowWidth&&(e=this.windowWidth),e<-this.windowWidth&&(e=-this.windowWidth),this.delta=t.touches[0].clientX-this.touchX,this.touchX=t.touches[0].clientX):(e=t.touches[0].clientY-this.touchStartY,e>this.windowHeight&&(e=this.windowHeight),e<-this.windowHeight&&(e=-this.windowHeight),this.delta=t.touches[0].clientY-this.touchY,this.touchY=t.touches[0].clientY),this.next&&this.nextPage.ready){if(this.nextPage.isEnd)return;e>0&&(e=0),this.prePage.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth+e,"px,0)"),"(0,".concat(-this.windowHeight+e,"px)")],this.curPage.pageTranslate=["(".concat(e,"px,0)"),"(".concat(e,"px,0)"),"(0,".concat(e,"px)")],this.nextPage.pageTranslate=["(0,0)","(".concat(this.windowWidth+e,"px,0)"),"(0,".concat(this.windowHeight+e,"px)")]}!this.pre&&!this.next&&e<0&&(this.next=!0,this.nextPage.ready?this.nextPage.isEnd?uni.showToast({title:"跳转推荐页",icon:"none"}):(this.prePage.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth+e,"px,0)"),"(0,".concat(-this.windowHeight+e,"px)")],this.curPage.pageTranslate=["(".concat(e,"px,0)"),"(".concat(e,"px,0)"),"(0,".concat(e,"px)")],this.nextPage.pageTranslate=["(0,0)","(".concat(this.windowWidth+e,"px,0)"),"(0,".concat(this.windowHeight+e,"px)")]):this.nextChapter.ready&&(this.nextPage={ready:this.nextChapter.ready,chapterName:this.nextChapter.chapterName,text:this.nextChapter.text,pageNum:0,totalPage:this.nextChapter.totalPage,pageTranslate:["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")],canRead:this.nextChapter.canRead},this.prePage.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth+e,"px,0)"),"(0,".concat(-this.windowHeight+e,"px)")],this.curPage.pageTranslate=["(".concat(e,"px,0)"),"(".concat(e,"px,0)"),"(0,".concat(e,"px)")],this.nextPage.pageTranslate=["(0,0)","(".concat(this.windowWidth+e,"px,0)"),"(0,".concat(this.windowHeight+e,"px)")])),this.pre&&this.prePage.ready&&(e<0&&(e=0),this.prePage.isCover?(this.cover.pageTranslate=["(".concat(-this.windowWidth+e,"px,0)"),"(".concat(-this.windowWidth+e,"px,0)"),"(0,".concat(-this.windowHeight+e,"px)")],this.curPage.pageTranslate=["(0,0)","(".concat(e,"px,0)"),"(0,".concat(e,"px)")]):(this.prePage.pageTranslate=["(".concat(-this.windowWidth+e,"px,0)"),"(".concat(-this.windowWidth+e,"px,0)"),"(0,".concat(-this.windowHeight+e,"px)")],this.curPage.pageTranslate=["(0,0)","(".concat(e,"px,0)"),"(0,".concat(e,"px)")],this.nextPage.pageTranslate=["(0,0)","(".concat(this.windowWidth+e,"px,0)"),"(0,".concat(this.windowHeight+e,"px)")])),!this.pre&&!this.next&&e>0&&(this.pre=!0,this.prePage.ready?this.prePage.isCover?(this.cover.pageTranslate=["(".concat(-this.windowWidth+e,"px,0)"),"(".concat(-this.windowWidth+e,"px,0)"),"(0,".concat(-this.windowHeight+e,"px)")],this.curPage.pageTranslate=["(0,0)","(".concat(e,"px,0)"),"(0,".concat(e,"px)")]):(this.prePage.pageTranslate=["(".concat(-this.windowWidth+e,"px,0)"),"(".concat(-this.windowWidth+e,"px,0)"),"(0,".concat(-this.windowHeight+e,"px)")],this.curPage.pageTranslate=["(0,0)","(".concat(e,"px,0)"),"(0,".concat(e,"px)")],this.nextPage.pageTranslate=["(0,0)","(".concat(this.windowWidth+e,"px,0)"),"(0,".concat(this.windowHeight+e,"px)")]):this.preChapter.ready&&(this.prePage={ready:this.preChapter.ready,chapterName:this.preChapter.chapterName,text:this.preChapter.text,pageNum:this.preChapter.totalPage-1,totalPage:this.preChapter.totalPage,pageTranslate:["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")],canRead:this.preChapter.canRead},this.prePage.pageTranslate=["(".concat(-this.windowWidth+e,"px,0)"),"(".concat(-this.windowWidth+e,"px,0)"),"(0,".concat(-this.windowHeight+e,"px)")],this.curPage.pageTranslate=["(0,0)","(".concat(e,"px,0)"),"(0,".concat(e,"px)")],this.nextPage.pageTranslate=["(0,0)","(".concat(this.windowWidth+e,"px,0)"),"(0,".concat(this.windowHeight+e,"px)")]))},touchEnd:function(t){this.showAnimation=!0,this.showShadow=!1;var e=0;e=0===this.turnType||1===this.turnType?t.changedTouches[0].clientX-this.touchStartX:t.changedTouches[0].clientY-this.touchStartY,e<.8&&e>-.8?t.changedTouches[0].clientX<this.windowWidth/3?this.goPrePage():t.changedTouches[0].clientX>this.windowWidth/3*2?this.goNextPage():t.changedTouches[0].clientX<=this.windowWidth/3*2&&t.changedTouches[0].clientX>=this.windowWidth/3&&this.showMenu():this.next&&this.delta<=0?this.goNextPage():this.next&&this.delta>0?(this.prePage.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")],this.curPage.pageTranslate=["(0,0)","(0,0)","(0,0)"],this.nextPage.pageTranslate=["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")]):this.pre&&this.delta>=0?this.goPrePage():this.pre&&this.delta<0&&(this.prePage.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")],this.curPage.pageTranslate=["(0,0)","(0,0)","(0,0)"],this.nextPage.pageTranslate=["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")],this.cover.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")]),this.next=!1,this.pre=!1},touchcancel:function(){this.showAnimation=!1,this.showShadow=!1,this.prePage.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")],this.curPage.pageTranslate=["(0,0)","(0,0)","(0,0)"],this.nextPage.pageTranslate=["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")],this.cover.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")],this.next=!1,this.pre=!1},showMenu:function(){var t=this;this.menuShow=!0,setTimeout((function(){t.itemShow=!0}),100)},closeMenu:function(){var t=this;(0,p.setFullscreen)(!0),this.itemShow=!1,this.settingShow=!1,this.directoryShow=!1,setTimeout((function(){t.directoryShowBefore=!1,t.menuShow=!1}),300)},openSetting:function(){var t=this;this.itemShow=!1,setTimeout((function(){t.settingShow=!0}),300)},openDirectory:function(){var t=this;(0,p.setFullscreen)(!0),this.itemShow=!1,this.directoryShowBefore=!0,setTimeout((function(){t.directoryShow=!0}),300)},slideChanging:function(t){this.progressTouched=!0,this.chapterProgress=t.detail.value},slideChange:function(t){var e=this;return(0,o.default)((0,a.default)().mark((function i(){return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.chapterProgress=t.detail.value,uni.showLoading({title:"加载中"}),i.next=4,e.getThreeChapter(t.detail.value);case 4:e.progressTouched=!1,e.goToPage(0),uni.hideLoading();case 7:case"end":return i.stop()}}),i)})))()},goPrePage:function(){var t=this;if(this.prePage.isCover)return this.cover.pageTranslate=["(0,0)","(0,0)","(0,0)"],void(this.curPage.pageTranslate=["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")]);if(!this.prePage.ready&&!this.preChapter.ready)return this.waitForPre=!0,void uni.showLoading({title:"正在准备上一章",mask:!0});this.currentPage-=1,-1===this.currentPage&&(!0,this.currentPage=this.preChapter.totalPage-1,this.chapterRotate("pre"));var e=[].concat(this.curPage.pageTranslate),i=[].concat(this.prePage.pageTranslate);this.goToPage(this.currentPage),this.prePage.pageTranslate=["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")],this.curPage.pageTranslate=i,this.nextPage.pageTranslate=e,setTimeout((function(){t.showAnimation=!0,t.prePage.pageTranslate=["(".concat(-t.windowWidth,"px,0)"),"(".concat(-t.windowWidth,"px,0)"),"(0,".concat(-t.windowHeight,"px)")],t.curPage.pageTranslate=["(0,0)","(0,0)","(0,0)"],t.nextPage.pageTranslate=["(0,0)","(".concat(t.windowWidth,"px,0)"),"(0,".concat(t.windowHeight,"px)")]}),50)},goNextPage:function(){var t=this;if(this.nextPage.isEnd)uni.showToast({title:"没有了",icon:"none"});else{if(!this.nextPage.ready&&!this.nextChapter.ready)return this.waitForNext=!0,void uni.showLoading({title:"正在准备下一章",mask:!0});this.currentPage+=1;this.currentPage===this.curChapter.totalPage&&(!0,this.currentPage=0,this.chapterRotate("next"));var e=[].concat(this.curPage.pageTranslate),i=[].concat(this.nextPage.pageTranslate);this.goToPage(this.currentPage),this.prePage.pageTranslate=e,this.curPage.pageTranslate=i,this.nextPage.pageTranslate=["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")],setTimeout((function(){t.showAnimation=!0,t.prePage.pageTranslate=["(".concat(-t.windowWidth,"px,0)"),"(".concat(-t.windowWidth,"px,0)"),"(0,".concat(-t.windowHeight,"px)")],t.curPage.pageTranslate=["(0,0)","(0,0)","(0,0)"],t.nextPage.pageTranslate=["(0,0)","(".concat(t.windowWidth,"px,0)"),"(0,".concat(t.windowHeight,"px)")]}),50)}},chapterRotate:function(t){var e=this;return(0,o.default)((0,a.default)().mark((function i(){return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("next"!==t){i.next=13;break}if(e.preChapter=Object.assign({},e.curChapter),e.curChapter=Object.assign({},e.nextChapter),e.curChapter.chapterIndex===e.directoryList.length-1){i.next=12;break}return e.nextChapter={ready:!1,chapterIndex:e.curChapter.chapterIndex+1,chapterName:e.directoryList[e.curChapter.chapterIndex+1].name},i.next=7,e.getOneChapter(e.directoryList[e.curChapter.chapterIndex+1].chapterid);case 7:e.$set(e.nextChapter,"text",e.tmpChapter.text),e.$set(e.nextChapter,"canRead",e.tmpChapter.canRead),e.calcNextChapter(),i.next=13;break;case 12:e.nextChapter={ready:!0,isEnd:!0};case 13:if("pre"!==t){i.next=26;break}if(e.nextChapter=Object.assign({},e.curChapter),e.curChapter=Object.assign({},e.preChapter),0===e.curChapter.chapterIndex){i.next=25;break}return e.preChapter={ready:!1,chapterIndex:e.curChapter.chapterIndex-1,chapterName:e.directoryList[e.curChapter.chapterIndex-1].name},i.next=20,e.getOneChapter(e.directoryList[e.curChapter.chapterIndex-1].chapterid);case 20:e.$set(e.preChapter,"text",e.tmpChapter.text),e.$set(e.preChapter,"canRead",e.tmpChapter.canRead),e.calcPreChapter(),i.next=26;break;case 25:e.preChapter={ready:!0,isCover:!0};case 26:case"end":return i.stop()}}),i)})))()},goNextChapter:function(){this.curChapter.chapterIndex!==this.directoryList.length-1?this.waitForNext||this.waitForPre||(this.nextChapter.ready?(this.chapterRotate("next"),this.goToPage(0)):(uni.showLoading({title:"正在准备下一章"}),this.waitForNextChapter=!0)):uni.showToast({title:"已经是最后一章了",icon:"none"})},goPreChapter:function(t){0!==this.curChapter.chapterIndex?this.waitForNext||this.waitForPre||(this.preChapter.ready?(this.chapterRotate("pre"),this.goToPage(0)):(uni.showLoading({title:"正在准备上一章"}),this.waitForPreChapter=!0)):uni.showToast({title:"这是第一章",icon:"none"})},goToPage:function(t){this.currentPage=t,this.showAnimation=!1,this.curPage={ready:this.curChapter.ready,chapterName:this.curChapter.chapterName,text:this.curChapter.text,pageNum:this.currentPage,totalPage:this.curChapter.totalPage,pageTranslate:["(0,0)","(0,0)","(0,0)"],canRead:this.curChapter.canRead},0===this.currentPage?this.preChapter.ready&&this.preChapter.isCover?this.prePage={ready:!0,isCover:!0,pageTranslate:["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")]}:this.prePage={ready:this.preChapter.ready,chapterName:this.preChapter.chapterName,text:this.preChapter.text,pageNum:this.preChapter.totalPage-1,totalPage:this.preChapter.totalPage,pageTranslate:["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")],canRead:this.preChapter.canRead}:this.prePage={ready:!0,chapterName:this.curChapter.chapterName,text:this.curChapter.text,pageNum:this.currentPage-1,totalPage:this.curChapter.totalPage,pageTranslate:["(".concat(-this.windowWidth,"px,0)"),"(".concat(-this.windowWidth,"px,0)"),"(0,".concat(-this.windowHeight,"px)")],canRead:this.curChapter.canRead},this.currentPage>=this.curChapter.totalPage-1?this.nextChapter.ready&&this.nextChapter.isEnd?this.nextPage={ready:!0,isEnd:!0,pageTranslate:["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")]}:this.nextPage={ready:this.nextChapter.ready,chapterName:this.nextChapter.chapterName,text:this.nextChapter.text,pageNum:0,totalPage:this.nextChapter.totalPage,pageTranslate:["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")],canRead:this.nextChapter.canRead}:this.nextPage={ready:!0,chapterName:this.curChapter.chapterName,text:this.curChapter.text,pageNum:this.currentPage+1,totalPage:this.curChapter.totalPage,pageTranslate:["(0,0)","(".concat(this.windowWidth,"px,0)"),"(0,".concat(this.windowHeight,"px)")],canRead:this.curChapter.canRead}},goToChapter:function(t){var e=this;return(0,o.default)((0,a.default)().mark((function i(){return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return uni.showLoading({title:"加载中"}),e.progressTouched=!1,e.closeMenu(),i.next=5,e.getThreeChapter(t);case 5:e.goToPage(0),setTimeout((function(){uni.hideLoading()}),1e3);case 7:case"end":return i.stop()}}),i)})))()},bigSize:function(){var t=this;return(0,o.default)((0,a.default)().mark((function e(){var i,n;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.progress,t.fontSize+=2,uni.setStorageSync("fontSize",t.fontSize),t.calcHeight(),e.next=6,t.calcCurChapter();case 6:if(n=Math.floor((t.curChapter.totalPage-1)*i),t.goToPage(n),!t.preChapter.ready||t.preChapter.isCover){e.next=12;break}return t.preChapter.ready=!1,e.next=12,t.calcPreChapter();case 12:if(!t.nextChapter.ready||t.nextChapter.isEnd){e.next=16;break}return t.nextChapter.ready=!1,e.next=16,t.calcNextChapter();case 16:case"end":return e.stop()}}),e)})))()},smallSize:function(){var t=this;return(0,o.default)((0,a.default)().mark((function e(){var i,n;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.progress,t.fontSize-=2,uni.setStorageSync("fontSize",t.fontSize),t.calcHeight(),e.next=6,t.calcCurChapter();case 6:if(n=Math.floor((t.curChapter.totalPage-1)*i),t.goToPage(n),!t.preChapter.ready||t.preChapter.isCover){e.next=12;break}return t.preChapter.ready=!1,e.next=12,t.calcPreChapter();case 12:if(!t.nextChapter.ready||t.nextChapter.isEnd){e.next=16;break}return t.nextChapter.ready=!1,e.next=16,t.calcNextChapter();case 16:case"end":return e.stop()}}),e)})))()},changeFont:function(t){2===t?(this.preChapter.text=(0,h.traditionalized)(this.preChapter.text),this.curChapter.text=(0,h.traditionalized)(this.curChapter.text),this.nextChapter.text=(0,h.traditionalized)(this.nextChapter.text),this.prePage.text=(0,h.traditionalized)(this.prePage.text),this.curPage.text=(0,h.traditionalized)(this.curPage.text),this.nextPage.text=(0,h.traditionalized)(this.nextPage.text),this.simplified=2,uni.setStorageSync("simplified",2)):(this.preChapter.text=(0,h.simplized)(this.preChapter.text),this.curChapter.text=(0,h.simplized)(this.curChapter.text),this.nextChapter.text=(0,h.simplized)(this.nextChapter.text),this.prePage.text=(0,h.simplized)(this.prePage.text),this.curPage.text=(0,h.simplized)(this.curPage.text),this.nextPage.text=(0,h.simplized)(this.nextPage.text),this.simplified=1,uni.setStorageSync("simplified",1))},changeLineHeight:function(t){var e=this;return(0,o.default)((0,a.default)().mark((function i(){var n,o;return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.progress,t!==e.lineHeight){i.next=5;break}return i.abrupt("return");case 5:return e.lineHeight=t,uni.setStorageSync("lineHeight",e.lineHeight),e.calcHeight(),i.next=10,e.calcCurChapter();case 10:if(o=Math.floor((e.curChapter.totalPage-1)*n),e.goToPage(o),!e.preChapter.ready||e.preChapter.isCover){i.next=16;break}return e.preChapter.ready=!1,i.next=16,e.calcPreChapter();case 16:if(!e.nextChapter.ready||e.nextChapter.isEnd){i.next=20;break}return e.nextChapter.ready=!1,i.next=20,e.calcNextChapter();case 20:case"end":return i.stop()}}),i)})))()},changeTurnType:function(t){t!==this.turnType&&(this.showAnimation=!1,this.turnType=t,uni.setStorageSync("turnType",this.turnType))},changeBackground:function(t){t!==this.background&&(this.background=t,uni.setStorageSync("background",this.background))},getDirectoryList:function(t){var e=this;return(0,o.default)((0,a.default)().mark((function t(){var i;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=uni.getStorageSync("allmulu:"+e.bookId),console.log(i.length),!i){t.next=5;break}return e.directoryList=i,t.abrupt("return");case 5:return t.next=7,e.$u.api.getDetail({book_id:e.bookId}).then((function(t){return 0!==t.status?e.$u.toast(t.msg):!t.data||!t.data.zjlist||t.data.zjlist.length<1?e.$u.toast("该章节没有内容"):(t.data.zjlist.forEach((function(t,i){e.directoryList.push({index:i,chapter:i+1,name:t,chapterid:i+1})})),console.log(i.length),void uni.setStorage({key:"allmulu:"+e.bookId,data:e.directoryList}))})).catch((function(t){console.log(t)}));case 7:case"end":return t.stop()}}),t)})))()},getOneChapter:function(t,e){var i=this;return e&&uni.showLoading({title:"加载中",mask:!0}),new Promise((function(e,n){var a=uni.getStorageSync("zw:"+i.bookId+":"+t);a?(i.tmpChapter.text=a,2===i.simplified&&(i.tmpChapter.text=(0,h.traditionalized)(i.tmpChapter.text)),e(),uni.hideLoading()):i.$u.api.getText({book_id:i.bookId,index:t}).then((function(n){return console.log("从服务器获取章节数据成功，chapterId="+t),0!==n.status?(console.log(i.bookId,t),uni.showToast({title:n.msg,mask:!0}),i.showtips=n.msg,i.$u.toLocaleString(n.msg)):n.data&&n.data.content?(i.tmpChapter.text=n.data.content,2===i.simplified&&(i.tmpChapter.text=(0,h.traditionalized)(i.tmpChapter.text)),uni.setStorage({key:"zw:"+i.bookId+":"+t,data:n.data.content}),void e()):(uni.showToast({title:"该章节不存在正文",mask:!0}),i.showtips="该章节不存在正文",i.$u.toLocaleString("该章节不存在正文"))})).catch((function(t){console.log(t)}))})).then((function(){}),(function(){return uni.hideLoading(),new Promise((function(e,n){uni.showModal({title:"连接失败",content:"请检查您的网络状态",confirmText:"重试",success:function(){var n=(0,o.default)((0,a.default)().mark((function n(o){return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!o.confirm){n.next=6;break}return n.next=3,i.getOneChapter(t,!0);case 3:e(),n.next=7;break;case 6:o.cancel&&i.back();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()})}))}))},getThreeChapter:function(t){var e=this;return(0,o.default)((0,a.default)().mark((function i(){return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log("获取当前第"+t+"章数据",e.directoryList[t].chapterid),i.next=3,e.getOneChapter(e.directoryList[t].chapterid);case 3:if(e.curChapter={chapterIndex:t,chapterName:e.directoryList[t].name,text:e.tmpChapter.text,canRead:e.tmpChapter.canRead},console.log("this.curChapter",e.curChapter),0===e.curChapter.chapterIndex){i.next=11;break}return i.next=8,e.getOneChapter(e.directoryList[t-1].chapterid);case 8:e.preChapter={chapterIndex:t-1,chapterName:e.directoryList[t-1].name,text:e.tmpChapter.text,canRead:e.tmpChapter.canRead},i.next=12;break;case 11:e.preChapter={ready:!0,isCover:!0};case 12:if(e.curChapter.chapterIndex===e.directoryList.length-1){i.next=18;break}return i.next=15,e.getOneChapter(e.directoryList[t+1].chapterid);case 15:e.nextChapter={chapterIndex:t+1,chapterName:e.directoryList[t+1].name,text:e.tmpChapter.text,canRead:e.tmpChapter.canRead},i.next=19;break;case 18:e.nextChapter={ready:!0,isEnd:!0};case 19:return i.next=21,e.calcCurChapter();case 21:return i.next=23,e.calcPreChapter();case 23:return i.next=25,e.calcNextChapter();case 25:case"end":return i.stop()}}),i)})))()}}};e.default=d},a897:function(t,e,i){var n=i("079b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("7ed380ca",n,!0,{sourceMap:!1,shadowMode:!1})},c3ca:function(t,e,i){"use strict";var n=i("a897"),a=i.n(n);a.a}}]);